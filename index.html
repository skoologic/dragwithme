<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<style>
    * {
        box-sizing: border-box;
        padding: 0;
        margin: 0;
    }

    .back-content {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
    }

    .back {
        position: absolute;
        height: 500px;
        width: 500px;

        background-image: url("back.png");
        background-size: contain;
        background-repeat: no-repeat;
    }

    .view {
        position: absolute;
        top: 100px;
        left: 45%;
        height: 300px;
        width: 300px;
        overflow: hidden;
    }
</style>
<body>
<div class="view">
    <div class="back">
        <div class="back-content">
            <span style="position: absolute; left: 50px; top: 50%">left</span>
            <span style="position: absolute; right: 50px; top: 50%">right</span>
        </div>
    </div>
</div>
</body>
<script>
    const AttachDragTo = (function () {
        const _AttachDragTo = function (el, back) {
            this.el = el;
            this.back = back;
            this.mouse_is_down = false;
            this.init();
        };

        _AttachDragTo.prototype = {
            onMousemove: function (e) {
                if (!this.mouse_is_down) {
                    return;
                }
                let x = e.clientX - this.origin_x, y = e.clientY - this.origin_y;
                console.log('mouse drag', x, y);

                // for smooth
                x = Math.round(x / 1);
                y = Math.round(y / 1);

                x += this.og_x;
                y += this.og_y;
                if (this.right < x && x < 0) {
                    this.back.style.left = x + 'px';
                }
                if (this.bottom < y && y < 0) {
                    this.back.style.top = y + 'px';
                }
            },

            onMousedown: function (e) {
                console.log('mouse down', e.clientX, e.clientY);
                this.mouse_is_down = true;
                this.origin_x = e.clientX;
                this.origin_y = e.clientY;
            },

            onMouseup: function (e) {
                const styles = getComputedStyle(this.back);

                this.mouse_is_down = false;
                this.og_x = parseInt(styles.getPropertyValue('left'), 10);
                this.og_y = parseInt(styles.getPropertyValue('top'), 10);
                console.log('mouse up', this.og_x, this.og_y);
            },
            
            onMouseout: function (e) {
                const styles = getComputedStyle(this.back);

                this.mouse_is_down = false;
                this.og_x = parseInt(styles.getPropertyValue('left'), 10);
                this.og_y = parseInt(styles.getPropertyValue('top'), 10);
                console.log('mouse out', this.og_x, this.og_y);
            },

            init: function () {
                console.log('init', this.el, this.back);
                const styles = getComputedStyle(this.back);
                this.og_x = parseInt(styles.getPropertyValue('left'), 10);
                this.og_y = parseInt(styles.getPropertyValue('top'), 10);
                this.right = -($(this.back).width() - $(this.el).width());
                this.bottom = -($(this.back).height() - $(this.el).height());
                /*
                    for pure js
                    getComputedStyle, getPixelValue
                 */
                console.log('right', this.right, 'bottom', this.bottom);

                //attach events
                this.el.addEventListener('mousedown', this.onMousedown.bind(this), false);
                this.el.addEventListener('mouseup', this.onMouseup.bind(this), false);
                this.el.addEventListener('mousemove', this.onMousemove.bind(this), false);
                this.el.addEventListener('mouseout', this.onMouseout.bind(this), false);
            }
        };

        return function (el, back) {
            new _AttachDragTo(el, back);
        };
    })();
    AttachDragTo($('.view')[0], $('.back')[0])
</script>
</html>